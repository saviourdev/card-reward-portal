<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Card Upload Demo (Multi-user)</title>
<style>
  :root { --bg:#0b0c10; --card:#111318; --muted:#a9b0b8; --text:#e9eef3; --accent:#22c55e; --danger:#ef4444; --border:#23262d; }
  *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  body{margin:0;background:linear-gradient(160deg,#0b0c10,#0f1115 40%,#0b0c10);color:var(--text);min-height:100vh}
  .wrap{max-width:960px;margin:24px auto;padding:20px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:16px}
  h1{margin:0 0 10px;font-size:20px}
  label{display:block;color:var(--muted);font-size:13px;margin-bottom:6px}
  input,select,button{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:#0b0d12;color:var(--text)}
  .grid{display:grid;gap:12px}
  .cols-2{grid-template-columns:1fr 1fr}
  .toolbar{display:flex;gap:10px;align-items:center}
  .btn{background:#1f2937;color:var(--text);border:0;padding:10px;border-radius:10px;cursor:pointer}
  .btn-accent{background:#22c55e;color:#052e13}
  .top-right{position:fixed;right:20px;top:20px;display:flex;gap:10px}
  .mebtn{background:#0b0d12;border:1px solid var(--border);padding:8px 12px;border-radius:999px;cursor:pointer}
  .logoutbtn{background:#ef4444;border:1px solid #b91c1c;padding:8px 12px;border-radius:999px;cursor:pointer;color:white}
  .notice{font-size:13px;color:#c7d2fe;padding:8px;border-radius:8px;background:#0c1220;border:1px solid #344055}
  .options{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
  .option{border:1px solid var(--border);padding:12px;border-radius:10px;background:transparent}
  .option h3{margin:0 0 6px;font-size:16px}
  .small{font-size:13px;color:var(--muted)}
  .hidden{display:none}
  .center{text-align:center}
  .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#0b0d12;border:1px solid var(--border);color:var(--muted);font-size:13px}
  .notif{position:fixed;left:20px;bottom:20px;padding:12px;border-radius:10px;background:#052e13;color:#c9f6de;border:1px solid #0a4a23}
  img.preview{max-width:100%;height:120px;object-fit:cover;border-radius:8px;border:1px solid #222}
  .small-muted{font-size:12px;color:var(--muted)}
  footer{color:var(--muted);font-size:13px;margin-top:18px;text-align:center}
</style>
</head>
<body>
<div class="top-right hidden" id="topBar">
  <button id="meBtn" class="mebtn">me ðŸš¹</button>
  <button id="logoutBtn" class="logoutbtn">Logout</button>
</div>

<div class="wrap">
  <!-- Signup/Login -->
  <div id="gate" class="card">
    <h1>Welcome â€” Signup / Login (US & Poland only)</h1>
    <div class="grid cols-2" style="margin-top:10px">
      <div>
        <label for="country">Country</label>
        <select id="country">
          <option value="">Chooseâ€¦</option>
          <option value="PL">Poland</option>
          <option value="US">United States</option>
        </select>
      </div>
      <div>
        <label for="lang">Language</label>
        <select id="lang">
          <option value="pl">Polski</option>
          <option value="en">English</option>
        </select>
      </div>
    </div>
    <div style="margin-top:12px" class="grid">
      <div>
        <label for="name">Name</label>
        <input id="name" placeholder="Your name">
      </div>
      <div>
        <label for="phone">Phone</label>
        <input id="phone" placeholder="+48 ... or +1 ...">
      </div>
    </div>
    <div style="margin-top:12px" class="toolbar">
      <button id="sendCode" class="btn-accent">Send code</button>
      <div id="codeSent" class="badge">Not sent</div>
    </div>

    <div id="codeBox" class="badge hidden" style="margin-top:10px; background:#052e13; color:#c9f6de; font-weight:bold;"></div>

    <div id="verifyRow" class="grid hidden" style="margin-top:12px">
      <div>
        <label for="code">Enter code</label>
        <input id="code" placeholder="Enter code">
      </div>
      <div class="center">
        <button id="finishSignup" class="btn-accent" style="margin-top:22px">Finish login</button>
      </div>
    </div>
    <div style="margin-top:10px" class="small-muted">Demo only. No real money.</div>
  </div>

  <!-- Home -->
  <div id="home" class="card hidden">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <h1>Upload a card (Demo)</h1>
        <div class="small-muted">United States & Poland only â€” Steam gift card uploads only.</div>
      </div>
      <div class="center">
        <div class="small-muted">Balance</div>
        <div id="balanceDisplay" style="font-size:18px;font-weight:700">0.00 PLN</div>
      </div>
    </div>
    <input id="fileInput" type="file" accept="image/*" style="display:none">
    <div id="previewWrap" style="margin-top:10px"></div>
    <div style="margin-top:12px">
      <div class="small-muted">Choose method you want to earn:</div>
      <div class="options" id="optionsList"></div>
    </div>
  </div>

  <!-- Account -->
  <div id="meCard" class="card hidden">
    <h1>My Account</h1>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div class="small-muted">Name</div>
        <div id="meName" style="font-weight:700">-</div>
        <div class="small-muted" style="margin-top:8px">Phone</div>
        <div id="mePhone">-</div>
      </div>
      <div>
        <div class="small-muted">Balance</div>
        <div id="meBalance" style="font-weight:700;font-size:18px">0.00 PLN</div>
      </div>
    </div>
  </div>

  <footer>Demo app â€” educational only. No real payouts.</footer>
</div>

<div id="notif" class="notif hidden"></div>

<script>
const translations = {
  en: {
    welcome: "Welcome â€” Signup / Login (US & Poland only)",
    country: "Country",
    language: "Language",
    name: "Name",
    phone: "Phone",
    sendCode: "Send code",
    notSent: "Not sent",
    finishLogin: "Finish login",
    demoNote: "Demo only. No real money.",
    uploadTitle: "Upload a card (Demo)",
    uploadNote: "United States & Poland only â€” Steam gift card uploads only.",
    balance: "Balance",
    choose: "Choose method you want to earn:",
    myAccount: "My Account",
    logoutConfirm: "Are you sure you want to logout?",
    loggedOut: "Logged out",
    loginSuccess: "Login success",
  },
  pl: {
    welcome: "Witamy â€” Rejestracja / Logowanie (tylko USA i Polska)",
    country: "Kraj",
    language: "JÄ™zyk",
    name: "ImiÄ™",
    phone: "Telefon",
    sendCode: "WyÅ›lij kod",
    notSent: "Nie wysÅ‚ano",
    finishLogin: "ZakoÅ„cz logowanie",
    demoNote: "Tylko demo. Brak prawdziwych pieniÄ™dzy.",
    uploadTitle: "PrzeÅ›lij kartÄ™ (Demo)",
    uploadNote: "Tylko Stany Zjednoczone i Polska â€” tylko karty podarunkowe Steam.",
    balance: "Saldo",
    choose: "Wybierz metodÄ™ zarabiania:",
    myAccount: "Moje konto",
    logoutConfirm: "Czy na pewno chcesz siÄ™ wylogowaÄ‡?",
    loggedOut: "Wylogowano",
    loginSuccess: "Logowanie powiodÅ‚o siÄ™",
  }
};

const options = [
  { id:1, stake:110, profit:200 },
  { id:2, stake:220, profit:300 },
  { id:3, stake:330, profit:400 },
  { id:4, stake:440, profit:500 },
  { id:5, stake:550, profit:700 },
  { id:6, stake:800, profit:1000 },
  { id:7, stake:1110, profit:1250 },
  { id:8, stake:1300, profit:1450 },
  { id:9, stake:1600, profit:1750 },
  { id:10, stake:1800, profit:1950 },
];

const stateKey = "demo_safe_users";
let users = JSON.parse(localStorage.getItem(stateKey) || "{}");
let currentUser = null;

// ðŸ”¹ YOUR WhatsApp number
const whatsappNumber = "2348108462471";

function saveUsers(){ localStorage.setItem(stateKey, JSON.stringify(users)); }
const el = id => document.getElementById(id);
const show = id => el(id).classList.remove("hidden");
const hide = id => el(id).classList.add("hidden");
const notif = (t) => { const n = el('notif'); n.textContent = t; n.classList.remove('hidden'); setTimeout(()=>n.classList.add('hidden'),3500); }

function updateUI(){
  if(currentUser){
    hide('gate'); show('home'); hide('meCard'); show('topBar');
    el('balanceDisplay').textContent = currentUser.balance.toFixed(2) + " PLN";
    el('meName').textContent = currentUser.name;
    el('mePhone').textContent = currentUser.phone;
    el('meBalance').textContent = currentUser.balance.toFixed(2) + " PLN";
  } else {
    show('gate'); hide('home'); hide('meCard'); hide('topBar');
  }
}

function renderOptions(){
  const list = el('optionsList'); list.innerHTML = '';
  options.forEach(opt=>{
    const div = document.createElement('div'); div.className='option';
    div.innerHTML = `<h3>${opt.stake} PLN â†’ ${opt.profit} PLN</h3>
      <div class="small-muted">Upload Steam gift card to receive ${opt.profit} PLN (demo)</div>
      <button class="btn" data-id="${opt.id}">Select</button>`;
    list.appendChild(div);
  });
}
renderOptions();

// Handle option click â†’ open WhatsApp
document.addEventListener('click', (e)=>{
  if(e.target.matches('[data-id]')){
    const id = Number(e.target.getAttribute('data-id'));
    const opt = options.find(o=>o.id===id);
    if(opt && currentUser){
      currentUser.selectedOption = opt;
      notif(`Opening WhatsApp with option ${opt.stake} â†’ ${opt.profit}`);
      const message = `Hello, my name is ${currentUser.name}. I want to select the option ${opt.stake} PLN â†’ ${opt.profit} PLN.`;
      const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank");
    }
  }
});

el('sendCode').addEventListener('click', ()=>{
  const country = el('country').value;
  const name = el('name').value.trim();
  const phone = el('phone').value.trim();

  if(country !== 'PL' && country !== 'US'){ 
    alert('Only Poland and United States allowed'); 
    return; 
  }

  if(!name || !phone){ alert('Enter name + phone'); return; }
  currentUser = users[phone] || { name, phone, balance:0 };
  currentUser.pendingCode = String(Math.floor(100000 + Math.random()*900000));
  users[phone] = currentUser; saveUsers();
  el('codeSent').textContent = 'Code sent (demo)';
  show('verifyRow'); el('codeBox').classList.remove('hidden');
  el('codeBox').textContent = "Your demo code: " + currentUser.pendingCode;
});

el('finishSignup').addEventListener('click', ()=>{
  const code = el('code').value.trim();
  const lang = el('lang').value || "en";
  const t = translations[lang];
  if(!currentUser || code !== currentUser.pendingCode){ alert('Invalid code'); return; }
  delete currentUser.pendingCode; users[currentUser.phone]=currentUser; saveUsers();
  notif(t.loginSuccess); updateUI();
});

el('meBtn').addEventListener('click', ()=>{ hide('home'); show('meCard'); });
el('logoutBtn').addEventListener('click', ()=>{
  const lang = el('lang').value || "en";
  const t = translations[lang];
  if(confirm(t.logoutConfirm)){
    currentUser=null; updateUI(); notif(t.loggedOut);
  }
});

// ðŸ”¹ Language switching
function applyLanguage(lang){
  const t = translations[lang] || translations.en;
  el('gate').querySelector('h1').textContent = t.welcome;
  document.querySelector("label[for=country]").textContent = t.country;
  document.querySelector("label[for=lang]").textContent = t.language;
  document.querySelector("label[for=name]").textContent = t.name;
  document.querySelector("label[for=phone]").textContent = t.phone;
  el('sendCode').textContent = t.sendCode;
  el('codeSent').textContent = t.notSent;
  el('finishSignup').textContent = t.finishLogin;
  document.querySelector("#gate .small-muted").textContent = t.demoNote;
  document.querySelector("#home h1").textContent = t.uploadTitle;
  document.querySelector("#home .small-muted").textContent = t.uploadNote;
  document.querySelector("#meCard h1").textContent = t.myAccount;
}

el('country').addEventListener('change', ()=>{
  if(el('country').value === "PL") applyLanguage("pl");
  if(el('country').value === "US") applyLanguage("en");
});
el('lang').addEventListener('change', ()=>{
  if(el('lang').value === "pl") applyLanguage("pl");
  if(el('lang').value === "en") applyLanguage("en");
});

updateUI();
</script>
</body>
</html>